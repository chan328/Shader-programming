진짜 쉬운 빨강셰이더 Part2
=========================

전역변수 VS 정점셰이더
--------------------
- 셰이더에서 사용할 수 있는 입력 값으로는 전역변수와 정점데이터가 있습니다. 이 둘을 구분짓는 기준은 한 물체를 구성하는 모든 정점이 동일한 값을 사용하느냐의 여부입니다.<br>
- 만약 **동일한 값**을 사용한다면 이것은 전역변수가 될 수 있지만, 각 정점마다 **다른 값**을 사용한다면 당연히 전역변수가 될 수 없습니다. 그 대신 정점버퍼, 즉 정점 데이터의 일부로 이값을 받아들여야 합니다.
- 전역 변수의 예는 월드행렬, 카메라의 위치 등이 있고, 정점데이터 변수의 예는 정점의 위치, UV 좌표등이 있습니다. 

정점셰이더의 입력데이터
----------------------
```
struct VS_INPUT
{
    float4 mPosition : POSITION;
};
```
- 이 구조체는 멤버변수 mPosition을 통해 정점의 위치를 받아옵니다. 이 변수가 DX의 정점버퍼로부터 위치정보를 구해올 수 있는 이유는 POSITION이라는 시맨틱때문입니다. 
- 정점버퍼에는 정점의 위치, UV좌표, 법선 등을 비롯한 다양한 정보가 담겨 있을 수 있는데, 이 중에서 필요한 정보만을 쏙쏙 빼오는 것을 시맨틱이라고 합니다.

따라서 
```
float3 mPosition : POSITION;
```
코드는 `정점 데이터에서 위치정보를 가져와 mPosition에 대입하라!`라는 명령입니다.<br>
- 그럼 float4는 무슨뜻일까요? 이것은 변수의 데이터형입니다.<br>
- float4는 HLSL 자체에서 지원하는 데이터 형의 하나로 x, y, w, z값을 가지는 vector이며 각 성분은 부동소수점형입니다.

정점셰이더의 출력데이터
---------------------
- 1장에서 보았던 GPU파이프라인을 기억해보면 각 픽셀의 위치를 찾아내기 위해서는 정점셰이더가 위치변환 결과를 래스터라이저에 전달해줘야만 했습니다.
- 따라서 정점셰이더는 반드시 위치변환결과를 반환해야 합니다. 
```
struct VS_OUTPUT
{
    float4 mPosition : POSITION;
};
```
float4형으로 위치데이터를 반환하면서 위치라는 시맨틱을 붙여주었습니다.

전역변수
------
- 정점셰이더에서 공간변환을 할 때, 사용해야할 전역변수가 몇 개 있는데 그 전에 공간변환이 무엇인지부터 알아보겠습니다. 

3D 공간변환
----------
- 3D 물체를 모니터에 그리려면 정점들의 위치를 공간변환해야 한다고 말했습니다. 그렇다면 어떤 과정을 거쳐야 3D 물체를 모니터에 보여줄 수 있을까요?


1.물체공간
----------
 - 사과의 중앙을 원점으로 삼고 그 점을 시작으로 오른쪽, 위쪽, 앞쪽으로 3개의 축을 만들었을 때 원점으로부터의 사과의 표면까지의 거리를 (x, y, z)좌표로 표현할 수 있는데, 이 정점들을 3개씩 묶어 삼각형들을 만들면 폴리곤으로 사과모델을 만들 수 있습니다. 
 - 사과를 손에 쥔 채 팔을 이리저리 움직인다고 하였을 때 사과를 어디로 움직이던 간에 원점으로부터 각 정점의 거리는 변하지 않습니다. 이것이 `물체공간` 또는 `지역공간`이라고 합니다.
 - 물체공간에서는 각 물체가 자신만의 좌표계를 가지므로 다수의 물체를 통일적으로 처리하기 어렵습니다.

 ![물체공간](image/2.jfif)

 2.월드공간
 ---------
 - 사과를 모니터 앞에 놓아보면, 모니터도 물체이므로 자신만의 물체공간을 가지고 있을겁니다. 이 둘을 통일적으로 처리하기 위해서는 두 물체를 같은 공간으로 옮겨오면됩니다.
 - 그러려면 공간 하나를 새롭게 만들어야 합니다. 현재 위치한 방의 입구를 원점으로 삼고, 오른쪽, 위쪽, 앞쪽으로 +x, +y, +z인 3개의 축을 만들어 봅시다.
 - 이제 그 원점으로부터 모니터를 구성하는 정점들까지의 거리를 재면 새로운 x, y, z의 좌표고 정점들을 표현할 수 있습니다. 사과도 똑같은 방법으로 표현할 수 있습니다.
 - 이 새로운 공간을 `월드공간` 또는 ` 세계공간`이라고 부릅니다.
 
![월드공간](image\3.jfif)

 3.뷰공간
 --------
- 이제 카메라로 두 물체가 담겨있는 장면을 찍는다고 생각해봅시다. 그 후 두 물체가 보이지 않는 사진을 찍어봅시다. 이 두 사진을 비교해 보면 처음 사진에는 사과와 모니터가 보이지만 두번째 사진에는 두 물체가 보이지 않습니다. 
- 그렇다면 이 두 사진 간에 무언가 위치변화가 있어야 한다는 이야긴데 월드공간상에서는 두 물체의 위치는 변화가 없었습니다. 
- 따라서 카메라가 다른 공간을 사용한다는 이야긴데, 이렇게 카메라가 사용하는 공간을 `뷰공간`이라고 부릅니다. 
- 뷰공간의 원점은 카메라 렌즈의 정 중앙이고, 역시 그로부터 오른쪽, 위쪽, 앞쪽으로 3개의 축을 만들 수 있습니다.

![뷰공간](image\4.jpg)

**투영공간**
===========
카메라로 사진을 찍는 과정
1. `뷰공간` - 월드공간에 있는 물체를 카메라 공간으로 이동, 회적, 확대\축소. 
2. `투영공간` - 새로운 공간에 위치한 물체들을 2D이미지 위에 투영.